set(CMAKE_SYSTEM_NAME Darwin)
set(CMAKE_SYSTEM_PROCESSOR x86_64)
set(CMAKE_OSX_ARCHITECTURES x86_64 CACHE STRING "" FORCE)
set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)

if (DEFINED ENV{AERO_MACOS_SYSROOT} AND NOT DEFINED CMAKE_OSX_SYSROOT)
    set(CMAKE_OSX_SYSROOT "$ENV{AERO_MACOS_SYSROOT}" CACHE PATH "macOS SDK sysroot" FORCE)
endif()

if (NOT DEFINED CMAKE_C_COMPILER)
    if (DEFINED ENV{AERO_CC_MACOS_X86_64})
        set(CMAKE_C_COMPILER "$ENV{AERO_CC_MACOS_X86_64}" CACHE FILEPATH "C compiler for macos-x86_64" FORCE)
    else()
        set(CMAKE_C_COMPILER x86_64-apple-darwin23-clang CACHE FILEPATH "C compiler for macos-x86_64" FORCE)
    endif()
endif()

if (NOT DEFINED CMAKE_CXX_COMPILER)
    if (DEFINED ENV{AERO_CXX_MACOS_X86_64})
        set(CMAKE_CXX_COMPILER "$ENV{AERO_CXX_MACOS_X86_64}" CACHE FILEPATH "CXX compiler for macos-x86_64" FORCE)
    else()
        set(CMAKE_CXX_COMPILER x86_64-apple-darwin23-clang++ CACHE FILEPATH "CXX compiler for macos-x86_64" FORCE)
    endif()
endif()
